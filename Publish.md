As explained [here](OrchestraTables.md), when Orchestra is first set up the peers' base schemas are expanded to include a number of auxiliary tables some of which are used during the publish operation. These are the tables with '`_`' in their names below.

In this document we are treating publish as an operation separate from update exchange. However, in the current implementation an update exchange always follows a publish operation. This will change in later implementations, but for the time being it is useful to have a name for the combined publish/update-exchange operation. We will call this a sync operation below. An insertion into a table or relation _S_ will be written as +_S_(**x**) and a deletion as -_S_(**x**).

In the publish operation the publishing peer sends to the central update store server any changes to its instance since the last time it published. How this happens is described below.

When a peer's _n_<sup>th</sup> sync operation starts each table _Rel_ is compared to _Rel_`_`PREV. This _Rel_`_`PREV is a copy of _Rel_ as of the end of the peer's _n-1_<sup>st</sup> sync. And _Rel_ is one of the peer's base tables. In this way Orchestra determines what has been inserted and what has been deleted from _Rel_ since the last sync. Note that this means only net changes are detected, so that if a tuple was inserted then deleted between sync _n-1_ and _n_ it will not be detected.

Because of how _Rel_`_`PREV is maintained, when an insertion is detected it must be a tuple which was inserted locally and not inserted as the result of an update exchange mapping. For this reason the tuple must eventually find its way into _Rel_`_`L. This tuple may have been previously rejected. If so, this new local insertion should override this rejection, i.e., the tuple should ultimately be removed from _Rel_`_`R, the rejection table for _Rel_. The actual insertion into the table _Rel_`_`L and possible deletion from the table _Rel_`_`R is not part of the publish operation. Instead this happens during the subsequent update exchange. The publish operation is only responsible for sending the relevant information to the update store so that all peers can see the changes. To be exact, for each detected insertion +_Rel_(**x**) into the table _Rel_ the update store is sent +_Rel_`_`L(**x**). If the tuple is also found to exist in the table _Rel_`_`R, then the update store is also sent -_Rel_`_`R(**x**). The implementation details of this involve the tables _Rel_`_`L`_`INS and _Rel_`_`R`_`DEL.

To be continued with a similar description of how deletions are published.